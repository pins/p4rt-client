# Two Switch Simple Routing
## This example will build a simple layer 3 route from one server (namespace) through a Broadcom Tomahawk based switch, a Tofino based Barefoot switch (Wedge) and ultimately termiating on another server (namespace)

## Files
 * ### sai-p4info.txt
This is the mapping file generated by the P4 compiler when compliling the SAI - p4 program used in the installation
 * ### vals-p4.sh
This contains the table ids and the action ids used in this demo
 * ### pushP4Info.sh 
This script will push the sai-p4info.txt to the P4Runtime instance 
 * ### addRouterEntry.sh
This script will map the physical interface to a logical interface 
 * ### addNeighbor.sh
This script will create the neighbor entry with the neighbor IP and MAC addresses
 * ### addNexthop.sh
This script will create a Nexthop label for the referenced neighbor
 * ### addIpV4Route.sh
This script will add a IPv4 route for a CIDR to a nexthop
 * ### vals-bcm-server.sh
This contains the values to build the link from the Broadcom switch to the server
 * ### vals-bcm-wedge.sh
This contains the values to build the link from the Broadcom switch to the Wedge switch
 * ### vals-wedge-server.sh
This contains the values to build the link from the Wedge switch to the server
 * ### vals-wedge-bcm.sh
This contains the values to build the link from the Wedge switch to the Broadcom switch
 * ### buildAll.sh
This orchestrates building the entire demo
 * ### Two switch simple routing.pdf
This shows physical and logical topologies used in the demo
 * ### values.sh
This file contains blank entries for reference

## Steps to build a single link
 1. Push P4 info file (once per switch)
 2. Add router interface reference
 3. Add neighbor entry
 4. Add nexthop entry
 5. Add route

## Notes
 1. These scripts assume that p4rt-client is built and is on the execution `PATH` 
 2. The version of P4Runtime running at ONF (this demo) assume the logical interface ID is 1 greater than that displayed by `show interfaces status` i.e. Ethernet0 = 1, Ethernet124 = 125
 3. The `key` for the neighbor entry will be the calculated IPv6 Link Local address calculated from the destination MAC address for the neighbor
 4. The `addNexthop.sh` script assumes that `macToIpV6` is built from the utils directory and is on the execution `PATH`
